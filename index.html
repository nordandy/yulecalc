<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tengboms Julrimmare</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&family=Inter:wght@600&display=swap');

        * { box-sizing: border-box; }

        body {
            background-color: #111;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            user-select: none;
            -webkit-user-select: none;
        }

        .container {
            aspect-ratio: 235.3 / 396.6;
            width: min(100%, 450px, 95vh * (235.3 / 396.6));
            position: relative;
            container-type: size; 
        }

        svg {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        image { pointer-events: none; }

        /* --- DISPLAY LAGER --- */
        .display-overlay {
            position: absolute;
            font-family: 'VT323', monospace;
            z-index: 20; 
            color: #ff4444;
            pointer-events: none; 
        }

        /* --- TOPP-DISPLAY (MARQUEE) --- */
        #top-display-container {
            left: 4.1%; 
            top: 1.7%; 
            width: 53.6%; 
            height: 9.3%;
            overflow: hidden;
            display: flex;
            align-items: center;
            padding-top: 3%; 
            
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10px, black calc(100% - 10px), transparent 100%);
            mask-image: linear-gradient(to right, transparent 0%, black 10px, black calc(100% - 10px), transparent 100%);
        }

        .marquee-wrapper {
            display: flex;
            align-items: center;
            white-space: nowrap;
            will-change: transform;
            position: absolute;
            left: 0;
            height: 100%;
            width: max-content;
            flex-wrap: nowrap;
            opacity: 0; 
            transition: opacity 0.5s ease-in;
        }

        .marquee-moving {
            transition-timing-function: linear;
            transition-property: transform;
        }

        .tengbom-logo {
            height: 55%; 
            width: auto;
            fill: #a83e3e; 
            flex-shrink: 0; 
            padding: 0 2cqw;
            aspect-ratio: 737.1 / 141.7;
        }
        
        .marquee-text {
            font-size: 5.5cqw;
            color: #a83e3e;
            line-height: 1.2;
            display: flex; 
            align-items: center;
            flex-shrink: 0;
            margin: 0 5cqw;
        }

        /* --- HUVUD-DISPLAY --- */
        #main-display-container {
            left: 4.1%; 
            top: 24.3%; 
            width: 91.8%; 
            height: 27.4%;
            padding: 1.5% 0 3% 0; 
            display: flex;
            flex-direction: column;
        }

        #history-line {
            font-size: 4cqw; 
            color: #a83e3e; 
            width: 100%;
            text-align: right;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.2;
            flex-shrink: 0;
            border-bottom: 1px solid rgba(168, 62, 62, 0.4);
            padding-right: 5%; 
            padding-bottom: 1.5%; 
            margin-bottom: 2%;
            min-height: 1.4em;
            opacity: 0; 
            transition: opacity 0.2s;
        }
        
        #history-line.visible { opacity: 1; }

        #result-area {
            flex-grow: 1;
            overflow-y: auto; 
            display: flex;
            flex-direction: column;
            pointer-events: auto; 
            z-index: 50; 
            padding: 0 5% 0 4%;
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 10px, black calc(100% - 10px), transparent 100%);
            mask-image: linear-gradient(to bottom, transparent 0%, black 10px, black calc(100% - 10px), transparent 100%);
        }

        #result-content {
            font-size: 6cqw;
            color: #ff4444;
            line-height: 1.2; 
            text-align: right;
            white-space: pre-wrap;
            padding-right: 5px;
            margin-top: auto;
            margin-bottom: 0;
        }
        
        /* Specialklass för påskägget */
        .easter-egg {
            font-size: 8cqw !important; /* Större text */
            text-align: center !important; /* Centrerad */
            color: #ff4444;
            text-shadow: 0 0 5px rgba(255, 68, 68, 0.5);
            margin-top: auto;
            margin-bottom: auto !important; /* Centrera vertikalt */
        }

        #result-area::-webkit-scrollbar { width: 6px; }
        #result-area::-webkit-scrollbar-track { background: rgba(168, 62, 62, 0.1); margin: 5px 0; }
        #result-area::-webkit-scrollbar-thumb { background: #a83e3e; border-radius: 4px; }

        /* --- SNÖ & TOMTE --- */
        .snow-cross {
            stroke: #ff4444;
            stroke-width: 1.5; 
            stroke-linecap: round;
            pointer-events: none;
        }
        .snow-pixel {
            fill: #ff4444;
            shape-rendering: crispEdges; 
            pointer-events: none;
        }
        
        #santa-sprite {
            display: none; 
            pointer-events: none;
            image-rendering: pixelated; 
        }

        /* --- KNAPPAR --- */
        .hitbox { 
            fill: rgba(255,255,255,0); 
            stroke: none; 
            cursor: pointer; 
            pointer-events: all; 
        }
        
        .hitbox-shadow:active { fill: rgba(0, 0, 0, 0.4); }
        .off .hitbox { cursor: default; pointer-events: none; }
        .off #btn-side-power { pointer-events: all; cursor: pointer; }

        #lever-knob { fill: #222; transition: cx 0.2s cubic-bezier(0.2, 1.2, 0.2, 1); pointer-events: none; }
        
        #mute-light {
            fill: transparent; 
            stroke: none;
            transition: fill 0.1s;
        }
        #mute-light.lit {
            fill: #ff0000; 
            filter: drop-shadow(0 0 2px #ff0000);
        }

    </style>
</head>
<body>

<div class="container" id="calculator">
    
    <div id="top-display-container" class="display-overlay">
        <div class="marquee-wrapper" id="marquee">
            <svg class="tengbom-logo" id="logo-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 737.1 141.7">
                <path d="M530.8,68.8c6.4-3.2,12.5-10.1,12.5-19.1s-9.5-21.4-23.5-21.4h-14.8v7.8h12.2c10,0,16.6,5.8,16.6,14.5s-6.2,15.1-15.5,15.1h-13.3v7.8h16.2c11.7,0,19.4,6.7,19.4,15.9s-7.3,16.2-20.3,16.2h-15.3v7.9h17.3c17,0,27.9-10,27.9-23.3s-7.8-19.2-19.4-21.3Z"/>
                <path d="M438.1,35.4c12.4,1.2,21.5,7.7,26.7,17h9.7c-6.6-15.1-19.5-24.3-36.4-25.6v8.6h0Z"/>
                <path d="M431,81.7h46c.6-2.6,1-5.3,1.2-8h-47.2v8Z"/>
                <path d="M465.1,88.9c-4.9,9.5-13.8,16.6-26.9,17.8v8.3c17.8-1.4,30.7-11.9,36.6-26.1h-9.7Z"/>
                <path d="M430.9,106.7c-19.2-1.4-32.7-15.6-32.7-35.8s13.2-34.2,32.7-35.6v-8.5c-25,1.4-42.4,19.7-42.4,44.1s17.7,42.4,42.4,44.1v-8.3h0Z"/>
                <path d="M596.4,106.5c-19.1-1.7-31.9-16.9-31.9-35.6s12.8-33.9,31.9-35.6v-8.5c-24.2,1.7-41.6,20.2-41.6,44.1s17.5,42.4,41.6,44.1v-8.5h0Z"/>
                <path d="M603.6,26.8v8.5c19.2,1.7,31.9,16.8,31.9,35.6s-12.7,33.9-31.9,35.6v8.5c24.3-1.7,41.6-20.2,41.6-44.1s-17.4-42.4-41.6-44.1Z"/>
                <polygon points="306.9 42.7 306.9 113.4 315.9 113.4 315.9 54.1 306.9 42.7"/>
                <polygon points="378.9 99 378.9 28.4 369.9 28.4 369.9 87.7 378.9 99"/>
                <polygon points="314.4 28.4 306.9 28.4 306.9 32.2 371.4 113.4 378.9 113.4 378.9 109.6 314.4 28.4"/>
                <polygon points="653.3 41.1 653.3 113.4 661.9 113.4 661.9 58.2 653.3 41.1"/>
                <polygon points="728.5 58.2 728.5 113.4 737.1 113.4 737.1 41.1 728.5 58.2"/>
                <polygon points="660.8 28.4 653.3 28.4 653.3 31.9 695.2 114.6 699.5 106.2 660.8 28.4"/>
                <polygon points="729.6 28.4 697.5 93 701.8 101.6 737.1 31.9 737.1 28.4 729.6 28.4"/>
                <path d="M0,0v141.7h141.7V0H0ZM58,113.4h-7.5V44.1h7.5v69.3h0ZM74.6,113.4h-7.5V44.1h7.5v69.3h0ZM91.1,113.4h-7.4V44.1h7.4v69.3h0ZM113.5,36.7H28.5v-8.4h85v8.4Z"/>
                <rect x="259.5" y="28.4" width="36.7" height="8.4"/>
                <rect x="259.5" y="65.9" width="35.6" height="8.5"/>
                <rect x="242.5" y="28.4" width="9.8" height="85.1"/>
                <rect x="259.5" y="104.9" width="37.2" height="8.5"/>
                <rect x="198.3" y="43.9" width="9.7" height="69.5"/>
                <rect x="170.2" y="28.4" width="65.4" height="8.4"/>
                <rect x="488.2" y="28.4" width="9.6" height="85.1"/>
            </svg>
            <span class="marquee-text">YULE CALC 3000 &copy; TENGBOM ARKITEKTER AB</span>
            <svg class="tengbom-logo" id="logo-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 737.1 141.7">
                <path d="M530.8,68.8c6.4-3.2,12.5-10.1,12.5-19.1s-9.5-21.4-23.5-21.4h-14.8v7.8h12.2c10,0,16.6,5.8,16.6,14.5s-6.2,15.1-15.5,15.1h-13.3v7.8h16.2c11.7,0,19.4,6.7,19.4,15.9s-7.3,16.2-20.3,16.2h-15.3v7.9h17.3c17,0,27.9-10,27.9-23.3s-7.8-19.2-19.4-21.3Z"/>
                <path d="M438.1,35.4c12.4,1.2,21.5,7.7,26.7,17h9.7c-6.6-15.1-19.5-24.3-36.4-25.6v8.6h0Z"/>
                <path d="M431,81.7h46c.6-2.6,1-5.3,1.2-8h-47.2v8Z"/>
                <path d="M465.1,88.9c-4.9,9.5-13.8,16.6-26.9,17.8v8.3c17.8-1.4,30.7-11.9,36.6-26.1h-9.7Z"/>
                <path d="M430.9,106.7c-19.2-1.4-32.7-15.6-32.7-35.8s13.2-34.2,32.7-35.6v-8.5c-25,1.4-42.4,19.7-42.4,44.1s17.7,42.4,42.4,44.1v-8.3h0Z"/>
                <path d="M596.4,106.5c-19.1-1.7-31.9-16.9-31.9-35.6s12.8-33.9,31.9-35.6v-8.5c-24.2,1.7-41.6,20.2-41.6,44.1s17.5,42.4,41.6,44.1v-8.5h0Z"/>
                <path d="M603.6,26.8v8.5c19.2,1.7,31.9,16.8,31.9,35.6s-12.7,33.9-31.9,35.6v8.5c24.3-1.7,41.6-20.2,41.6-44.1s-17.4-42.4-41.6-44.1Z"/>
                <polygon points="306.9 42.7 306.9 113.4 315.9 113.4 315.9 54.1 306.9 42.7"/>
                <polygon points="378.9 99 378.9 28.4 369.9 28.4 369.9 87.7 378.9 99"/>
                <polygon points="314.4 28.4 306.9 28.4 306.9 32.2 371.4 113.4 378.9 113.4 378.9 109.6 314.4 28.4"/>
                <polygon points="653.3 41.1 653.3 113.4 661.9 113.4 661.9 58.2 653.3 41.1"/>
                <polygon points="728.5 58.2 728.5 113.4 737.1 113.4 737.1 41.1 728.5 58.2"/>
                <polygon points="660.8 28.4 653.3 28.4 653.3 31.9 695.2 114.6 699.5 106.2 660.8 28.4"/>
                <polygon points="729.6 28.4 697.5 93 701.8 101.6 737.1 31.9 737.1 28.4 729.6 28.4"/>
                <path d="M0,0v141.7h141.7V0H0ZM58,113.4h-7.5V44.1h7.5v69.3h0ZM74.6,113.4h-7.5V44.1h7.5v69.3h0ZM91.1,113.4h-7.4V44.1h7.4v69.3h0ZM113.5,36.7H28.5v-8.4h85v8.4Z"/>
                <rect x="259.5" y="28.4" width="36.7" height="8.4"/>
                <rect x="259.5" y="65.9" width="35.6" height="8.5"/>
                <rect x="242.5" y="28.4" width="9.8" height="85.1"/>
                <rect x="259.5" y="104.9" width="37.2" height="8.5"/>
                <rect x="198.3" y="43.9" width="9.7" height="69.5"/>
                <rect x="170.2" y="28.4" width="65.4" height="8.4"/>
                <rect x="488.2" y="28.4" width="9.6" height="85.1"/>
            </svg>
        </div>
    </div>

    <div id="main-display-container" class="display-overlay">
        <div id="history-line"></div> 
        <div id="result-area">
            <div id="result-content">VÄLJ GÅVA...</div> 
        </div>
    </div>

    <svg version="1.1" viewBox="0 0 235.3 396.6" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <clipPath id="screen-mask">
                <rect x="9.6" y="96.4" width="216" height="108.6" />
            </clipPath>
        </defs>

        <image href="christmas_calculator.png" x="0" y="0" width="235.3" height="396.6" />

        <circle id="mute-light" cx="28" cy="89.6" r="1.9"/>

        <g id="Interactive_Buttons">
            <circle class="hitbox hitbox-shadow" cx="28" cy="72.8" r="12.5" onclick="toggleSound()" />
            <circle class="hitbox hitbox-shadow" cx="72.8" cy="72.8" r="12.5" onclick="connectNorthPole()" />
            <circle class="hitbox hitbox-shadow" cx="117.6" cy="72.8" r="12.5" onclick="showHelp()" />

            <path class="hitbox hitbox-shadow" onclick="input(7)" d="M54.4,212.9h36.9c1.6,0,2.8,1.3,2.8,2.8h0v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8"/>
            <path class="hitbox hitbox-shadow" onclick="input(8)" d="M99.2,212.9h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8h0"/>
            <path class="hitbox hitbox-shadow" onclick="input(9)" d="M9.6,212.9h36.9c1.6,0,2.8,1.3,2.8,2.8h0v36.9c0,1.6-1.3,2.8-2.8,2.8H9.6c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8h0"/>
            <path class="hitbox hitbox-shadow" onclick="input(4)" d="M54.4,257.7h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8h0v-36.9c0-1.6,1.3-2.8,2.8-2.8"/>
            <path class="hitbox hitbox-shadow" onclick="input(5)" d="M99.2,257.7h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8h0v-36.9c0-1.6,1.3-2.8,2.8-2.8"/>
            <path class="hitbox hitbox-shadow" onclick="input(6)" d="M9.6,257.7h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8H9.6c-1.6,0-2.8-1.3-2.8-2.8h0v-36.9c0-1.6,1.3-2.8,2.8-2.8h0"/>
            <path class="hitbox hitbox-shadow" onclick="input(1)" d="M54.4,302.5h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8"/>
            <path class="hitbox hitbox-shadow" onclick="input(2)" d="M99.2,302.5h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8"/>
            <path class="hitbox hitbox-shadow" onclick="input(3)" d="M9.6,302.5h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8H9.6c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8h0"/>
            <path class="hitbox hitbox-shadow" onclick="input(0)" d="M99.2,347.3h36.9c1.6,0,2.8,1.3,2.8,2.8v36.9c0,1.6-1.3,2.8-2.8,2.8h-36.9c-1.6,0-2.8-1.3-2.8-2.8v-36.9c0-1.6,1.3-2.8,2.8-2.8"/>

            <circle class="hitbox hitbox-shadow" onclick="action('CLEAR')" cx="162.5" cy="234.2" r="12.5" />
            <circle class="hitbox hitbox-shadow" onclick="togglePower()" id="btn-side-power" cx="207.3" cy="234.2" r="12.5" />
            <circle class="hitbox hitbox-shadow" onclick="action('BACK')" cx="162.5" cy="278.9" r="12.5" />
            <circle class="hitbox hitbox-shadow" onclick="action('RANDOM')" cx="207.3" cy="278.9" r="12.5" />

            <path class="hitbox hitbox-shadow" onclick="action('ADD')" d="M207.2,311.3c6.9,0,12.5,5.6,12.5,12.5s-5.6,12.5-12.5,12.5h-44.8c-6.9,0-12.5-5.6-12.5-12.5s5.6-12.5,12.5-12.5h44.8Z" />
            <path class="hitbox hitbox-shadow" onclick="generateRhyme()" d="M207.2,356.1c6.9,0,12.5,5.6,12.5,12.5s-5.6,12.5-12.5,12.5h-44.8c-6.9,0-12.5-5.6-12.4-12.5,0-6.9,5.6-12.4,12.4-12.4h44.8Z" />
        </g>

        <g clip-path="url(#screen-mask)">
            <g id="snow-layer"></g>
            <image id="santa-sprite" href="santa_frame_1.png" width="80" height="40" />
        </g>

        <circle id="lever-knob" cx="18.5" cy="368.5" r="4.5" style="fill:#333; stroke:none;" />
        <rect x="10" y="355" width="80" height="30" class="hitbox" onclick="adjustKnob()" />

    </svg>
</div>

<script src="script.js"></script>
</body>
</html>